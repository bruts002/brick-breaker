webpackJsonp([0],[function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(3),o=i(12),s=function(){function t(t,e,i,s,r,a){var u=this;this.domElement=document.createElementNS(n.SVGNAMESPACE,s),this.type=s,this.point=t,this.domElement.setAttribute("x",String(this.point.x)),this.domElement.setAttribute("y",String(this.point.y)),this.traj=new o.default(i),"circle"===this.type?(this.radius=+e,this.domElement.setAttribute("r",String(this.radius))):(this.size=e,this.domElement.setAttribute("width",String(this.size.width)),this.domElement.setAttribute("height",String(this.size.height))),void 0!==a&&Object.keys(a).forEach(function(t){return u.domElement.setAttribute(t,String(a[t]))}),this.mountNode=r,this.mountNode.appendChild(this.domElement)}return t.prototype.destroy=function(){this.mountNode.removeChild(this.domElement)},t.prototype.updateDOMPosition=function(t){var e="",i="";void 0!==t&&(this.point=t),"circle"===this.type?(e="cx",i="cy"):"rect"===this.type&&(e="x",i="y"),this.domElement.setAttribute(e,String(this.point.x)),this.domElement.setAttribute(i,String(this.point.y))},t.prototype.updateSize=function(t){"circle"===this.type?(t&&(this.radius=+t),this.domElement.setAttribute("r",String(this.radius))):(t&&(this.size=t),this.domElement.setAttribute("width",String(this.size.width)),this.domElement.setAttribute("height",String(this.size.height)))},t.prototype.getTraj=function(){return this.traj},t.prototype.invertTraj=function(t){this.traj.invert(t)},t.prototype.getNextPosition=function(){return{x:this.point.x+this.traj.x,y:this.point.y+this.traj.y}},t.prototype.getPoint=function(){return this.point},t.prototype.getSize=function(){return this.size},t.prototype.getRadius=function(){return this.radius},t}();e.default=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n;!function(t){t.capture="capture",t.defender="defender"}(n||(n={})),e.default=n},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(){}return t.css=function(e){if(!this.loadedCss.has(e)){this.loadedCss.add(e);var i={method:"get",headers:{"Content-Type":"text/css"}};fetch("css/"+e+".css",i).then(function(t){return t.text()}).then(t.attachToDocument)}},t.attachToDocument=function(t){var e=document.createElement("style"),i=document.createTextNode(t);e.appendChild(i),document.head.appendChild(e)},t.level=function(t){var e=this;if(this.loadedLevels.has(t))return this.serveFromCache(t);if(this.pendingLevels.has(t))return this.pendingLevels.get(t);var i={method:"get",headers:{"Content-Type":"application/json"}},n=fetch("levels/"+t+".json",i).then(function(t){return t.json()}).then(this.toLevel).then(function(i){return e.saveLevel(t,i)});return this.pendingLevels.set(t,n),n},t.toLevel=function(t){return t},t.saveLevel=function(t,e){return this.pendingLevels.delete(t),this.loadedLevels.set(t,e),Promise.resolve(e)},t.serveFromCache=function(t){return Promise.resolve(this.loadedLevels.get(t))},t.loadedCss=new Set,t.loadedLevels=new Map,t.pendingLevels=new Map,t}();e.default=n},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SVGNAMESPACE="http://www.w3.org/2000/svg"},function(t,e,i){"use strict";function n(t){return"level-"+t}function o(t,e,i){var o=n(t),s=localStorage.getItem(o);if(s){var r=JSON.parse(s);(!r[e]||i>r[e])&&(r[e]=i,localStorage.setItem(o,JSON.stringify(r)))}else localStorage.setItem(o,JSON.stringify((a={},a[e]=i,a)));var a}function s(t,e){var i=n(t),o=localStorage.getItem(i);if(!o)return 0;var s=JSON.parse(o);if(!e){if(s.defender&&s.capture)return Math.max(s.defender,s.capture);if(s.defender)return s.defender;if(s.capture)return s.capture}return e===r.default.capture?s.capture?s.capture:0:e===r.default.defender?s.defender?s.defender:0:void 0}Object.defineProperty(e,"__esModule",{value:!0});var r=i(1);e.default={setScore:o,getScore:s}},function(t,e,i){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var o=i(3),s=i(0),r=i(15),a=function(t){function e(i,n,s,r){var a=t.call(this,s.position,s.size,{x:0,y:0},"rect",n,s.attributes||e.defaults.attributes)||this;return a.boardSize=i,a.emitBullet=r,a.sheild=document.createElementNS(o.SVGNAMESPACE,"circle"),a.sheild.setAttribute("cx",String(s.position.x+s.size.width/2)),a.sheild.setAttribute("cy",String(s.position.y)),a.sheild.style.opacity="0.3",a.moveAmount=e.defaults.moveAmount,a}return n(e,t),e.prototype.moveLeft=function(){var t=this.nextLeft();this.point.x!==t&&(this.point.x=t,this.updateDOMPosition())},e.prototype.nextLeft=function(){for(var t=this.moveAmount;this.point.x-t<0;)t--;return this.point.x-t},e.prototype.moveRight=function(){var t=this.nextRight();this.point.x!==t&&(this.point.x=t,this.updateDOMPosition())},e.prototype.nextRight=function(){for(var t=this.moveAmount;this.point.x+this.size.width+t>this.boardSize.width;)t--;return this.point.x+t},e.prototype.applyReward=function(t){this.rewardType=t,this.rewardType===r.default.wide?this.makeWide():this.makeDefault(),this.updateColor()},e.prototype.updateColor=function(){this.domElement.setAttribute("fill",e.getColor(this.rewardType))},e.getColor=function(t){switch(t){case 7:return"#FF0D72";case 6:return"#0DC2FF";case 5:return"#0DFF72";case 4:return"#F538FF";case 3:return"#FF8E0D";case 2:return"#FFE138";default:case 1:return"#3877FF"}},e.prototype.activateSheld=function(){},e.prototype.useReward=function(){switch(this.rewardType){case r.default.machine:this.shootMachine();break;case r.default.rocket:this.shootRocket()}},e.prototype.shootRocket=function(){var t={x:this.point.x+this.size.width/2,y:this.point.y-this.size.height},e={width:3,height:9};this.emitBullet(t,e)},e.prototype.shootMachine=function(){var t={width:1,height:3};this.emitBullet({x:this.point.x,y:this.point.y-this.size.height},t),this.emitBullet({x:this.point.x+this.size.width,y:this.point.y-this.size.height},t)},e.prototype.makeWide=function(){this.updateSize(e.defaults.sizes.wide)},e.prototype.makeDefault=function(){this.updateSize(e.defaults.sizes.default)},e.prototype.moveUp=function(){},e.prototype.moveDown=function(){},e.defaults={sizes:{default:{width:9,height:3},wide:{width:14,height:3}},attributes:{fill:"gray",stroke:"black","stroke-width":"0.5"},moveAmount:3},e}(s.default);e.default=a},function(t,e,i){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var o=i(0),s=function(t){function e(i,n){var o=t.call(this,n.position,n.size,{x:0,y:0},"rect",i,n.attributes||e.defaults.attributes)||this;return o.hitCount=0,o.speed=n.speed||e.defaults.speed,o}return n(e,t),e.prototype.moveLeft=function(){this.point.x-=this.speed,this.updateDOMPosition()},e.prototype.moveRight=function(){this.point.x+=this.speed,this.updateDOMPosition()},e.prototype.moveUp=function(){this.point.y-=this.speed,this.updateDOMPosition()},e.prototype.moveDown=function(){this.point.y+=this.speed,this.updateDOMPosition()},e.prototype.grow=function(){this.size.width>=e.MAX_WIDTH||this.size.height>=e.MAX_HEIGHT||(this.size.width++,this.size.height++,this.updateSize())},e.prototype.getHit=function(t){return this.hitCount++,this.hitCount%10&&this.grow(),this.hitCount},e.prototype.applyReward=function(t){},e.prototype.setIndex=function(t){this.index=t},e.prototype.useReward=function(){},e.defaults={speed:1,attributes:{fill:"gray",stroke:"black","stroke-width":"0.5"}},e.MAX_WIDTH=5,e.MAX_HEIGHT=5,e}(o.default);e.default=s},function(t,e,i){"use strict";function n(t,e,i){var n=e+i-t;return n>=0&&n<=i}function o(t,e,i){return n(t.x,e.x,i.width)&&n(t.y,e.y,i.height)}function s(t,e,i){var n=Math.max(i.width,i.height);return r(t,e)<=n+3}function r(t,e){var i=t.x-e.x,n=t.y-e.y;return Math.sqrt(i*i+n*n)}Object.defineProperty(e,"__esModule",{value:!0}),e.isCollision=o,e.isNear=s,e.getDistance=r},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(2),o=function(){function t(t){n.default.css("Modal");var e=document.createElement("div"),i=document.createElement("div"),o=document.createElement("p"),s=document.createElement("div");e.setAttribute("class","modal"),i.setAttribute("class","modal-content"),o.innerHTML="Game Paused",s.setAttribute("class","modal-template"),!1!==t&&this.attachCloseButton(i),i.appendChild(o),i.appendChild(s),e.appendChild(i),e.style.display="none",document.body.appendChild(e),this.mdl=e,this.p=o,this.content=i,this.extensionPoint=s}return t.prototype.attachCloseButton=function(t){var e=document.createElement("span");e.setAttribute("class","closeBtn"),e.addEventListener("click",this.closeButton.bind(this)),e.innerHTML="&times;",t.appendChild(e)},t.prototype.show=function(t,e){e&&(this.cb=e),this.p.innerHTML=t,this.mdl.style.display="block"},t.prototype.closeButton=function(){this.cb?(this.cb(),this.cb=null):this.hide()},t.prototype.hide=function(){this.p.innerHTML="",this.mdl.style.display="none",this.content.classList.remove("success","fail")},t}();e.default=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(10),o=i(19),s=function(){function t(t){this.mountNode=t,this.levelSelector=new o.default(this.setLevel.bind(this)),this.levelSelector.show()}return t.prototype.setLevel=function(t,e,i){this.clearLevel(),this.gameBoard=new n.default(t.size,this.mountNode,this.levelSelector,e,i),this.gameBoard.init(t)},t.prototype.clearLevel=function(){this.gameBoard&&delete this.gameBoard},t}();e.default=s;new s(document.getElementById("gameBoard"))},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(3),o=i(11),s=i(13),r=i(1),a=i(14),u=i(5),d=i(6),h=i(16),l=i(7),c=i(8),p=i(4),f=i(17),y=i(18),v=function(){function t(t,e,i,o,s){this.size=t,this.mountNode=e,this.levelSelector=i,this.levelNumber=o,this.option=s,this.activeKeys=new Map,this.modal=new c.default,this.balls=[],this.bullets=[],this.rewards=[],this.levelEnded=!1,this.option===r.default.defender?this.score=0:this.option===r.default.capture&&(this.score=200),this.domElement=document.createElementNS(n.SVGNAMESPACE,"svg"),this.domElement.setAttribute("xmlns",n.SVGNAMESPACE),this.domElement.setAttribute("width","85%"),this.domElement.setAttribute("height","100%"),this.domElement.setAttribute("fill","black"),this.domElement.setAttribute("viewBox","0 0 "+this.size.width+" "+this.size.height),this.domElement.setAttribute("style","border:1px solid black;"),this.statusBar=new f.default(this.rewardSelect.bind(this),o,this.mountNode),e.appendChild(this.domElement)}return t.prototype.rewardSelect=function(t){this.player.applyReward(t)},t.prototype.init=function(t){this.renderedBlocks=this.renderBlocks(t.blocks),this.balls=this.renderBalls(t.balls),this.buildPlayerAndAI(t.paddle,t.guy),document.body.addEventListener("keydown",this.globalKeyListener.bind(this)),this.start()},t.prototype.buildPlayerAndAI=function(t,e){this.paddle=this.buildPaddle(t),this.guy=this.buildGuy(e),this.option===r.default.defender?(this.player=this.paddle,this.ai=this.guy):this.option===r.default.capture&&(this.player=this.guy,this.ai=this.paddle)},t.prototype.destroy=function(){for(document.body.removeEventListener("keydown",this.globalKeyListener.bind(this));this.mountNode.hasChildNodes();)this.mountNode.removeChild(this.mountNode.lastChild)},t.prototype.start=function(){this.modal.hide(),this.attachKeyListeners(),this.updateInterval=setInterval(this.update.bind(this),50),this.isPaused=!1},t.prototype.removeKeyListeners=function(){document.body.removeEventListener("keydown",this.keyUpDownHandler),document.body.removeEventListener("keyup",this.keyUpDownHandler)},t.prototype.attachKeyListeners=function(){document.body.addEventListener("keydown",this.keyUpDownHandler.bind(this)),document.body.addEventListener("keyup",this.keyUpDownHandler.bind(this))},t.prototype.buildPaddle=function(t){return new u.default(this.size,this.domElement,t,this.createBullet.bind(this))},t.prototype.buildGuy=function(t){return new d.default(this.domElement,t)},t.prototype.createBullet=function(t,e){this.bullets.push(new h.default(t,e,this.domElement))},t.prototype.buildBall=function(t){return new o.default(t,this.domElement)},t.prototype.renderBalls=function(t){return t.map(this.buildBall,this)},t.prototype.renderBlocks=function(t){return t.map(this.renderBlock,this)},t.prototype.renderBlock=function(t){return new s.default(t,this.domElement,this.dropReward.bind(this))},t.prototype.destroyBlock=function(t){this.renderedBlocks.splice(t,1)},t.prototype.dropReward=function(t,e){this.rewards.push(new y.default(t,e,this.domElement))},t.prototype.getBlock=function(t){var e;return this.renderedBlocks.some(function(i,n){var o=i.getPoint(),s=i.getSize();return l.isNear(t,o,s)&&l.isCollision(t,o,s)&&(e=i,e.setIndex(n)),Boolean(e)}),e},t.prototype.getGuy=function(t){var e=this.guy.getPoint(),i=this.guy.getSize();if(l.isNear(t,e,i)&&l.isCollision(t,e,i))return this.guy},t.prototype.endGame=function(t,e){clearInterval(this.updateInterval),this.levelEnded=!0,this.levelSelector.show(t,e),this.destroy()},t.prototype.stop=function(){this.modal.show("Game Paused",this.start.bind(this)),this.isPaused=!0,clearInterval(this.updateInterval)},t.prototype.isGameEnded=function(){var t,e,i=!1;return this.option===r.default.defender?0===this.renderedBlocks.length?(t="Level Complete!",e=!0,i=!0):0===this.balls.length&&(t="Level Failed!",e=!1,i=!0):this.option===r.default.capture&&(0===this.renderedBlocks.length?(t="Level Failed!",e=!1,i=!0):0===this.balls.length&&(t="Level Complete!",e=!0,i=!0)),i&&this.endGame(t,e),i},t.prototype.update=function(){if(this.isGameEnded())return void p.default.setScore(this.levelNumber,this.option,this.score);this.updateBalls(),this.updateBullets(),this.updateRewards(),this.dispatchActions(),this.updateAI()},t.prototype.updateScore=function(){this.option===r.default.defender?this.score+=5:this.option===r.default.capture&&(this.score-=5),this.statusBar.updateScore(this.score)},t.prototype.applyReward=function(t,e){e===this.option&&this.statusBar.addReward(t),e===r.default.defender?this.paddle.applyReward(t):e===r.default.capture&&this.guy.applyReward(t)},t.prototype.updateRewards=function(){var t=this,e=[],i=0;this.rewards.forEach(function(i,n){var o=i.getNextPosition(),s=t.paddle.getPoint(),a=t.paddle.getSize();o.y>=t.size.height?(e.push(n),i.destroy()):l.isCollision(o,s,a)?(t.applyReward(i.rewardType,r.default.defender),e.push(n),i.destroy()):i.updateDOMPosition(o)}),e.forEach(function(e){t.rewards.splice(e+i,1),i-=1})},t.prototype.updateBullets=function(){var t=this,e=[],i=0;this.bullets.forEach(function(t,i){for(var n,o,s,r,a,u,d,h=t.getSpeed(!0),l=0;l<h;l++){if(d=null,s=t.getNextPosition(),r=t.getPoint(),a=u=!1,t.isDestroyed)return void e.push(i);if(s.x<0||s.x>this.size.width||s.y<0||s.y>=this.size.height)return e.push(i),void t.destroy();d=this.getBlock({x:s.x,y:r.y}),d&&(a=!0,n=d.getStrength(),o=t.getStrength(),d.getHit(o)<=0?this.destroyBlock(d.index):d.setIndex(-1)),d=this.getBlock({x:r.x,y:s.y}),d&&(u=!0,n=d.getStrength(),o=t.getStrength(),t.getHit(n),0===d.getHit(o)?this.destroyBlock(d.index):d.setIndex(-1)),a||u||(d=this.getBlock(s))&&(n=d.getStrength(),o=t.getStrength(),t.getHit(n),0===d.getHit(o)?this.destroyBlock(d.index):d.setIndex(-1)),t.update()}},this),e.forEach(function(e){t.bullets.splice(e+i,1),i-=1})},t.prototype.updateBalls=function(){var t=this,e=[],i=0,n=this.paddle.getPoint(),o=this.paddle.getSize();this.balls.forEach(function(t,i){var s,r,a,u,d=t.getRadius(),h=t.getNextPosition();if((h.x-d<0||h.x+d>this.size.width)&&t.invertTraj("x"),(h.y-d<0||l.isCollision(h,n,o))&&t.invertTraj("y"),h.y+d>=this.size.height)return e.push(i),void t.destroy();h=t.getNextPosition(),u={x:h.x,y:t.point.y},a=this.getBlock(u)||this.getGuy(u),a&&(this.updateScore(),s=!0,t.invertTraj("x"),0===a.getHit(1)?this.destroyBlock(a.index):a.setIndex(-1)),h=t.getNextPosition(),u={x:t.point.x,y:h.y},a=this.getBlock(u)||this.getGuy(u),a&&(this.updateScore(),r=!0,t.invertTraj("y"),0===a.getHit(1)?this.destroyBlock(a.index):a.setIndex(-1)),s||r||(a=this.getBlock(h)||this.getGuy(h))&&(t.invertTraj("y"),t.invertTraj("x"),0===a.getHit(1)?this.destroyBlock(a.index):a.setIndex(-1)),h=t.getNextPosition(),t.updateDOMPosition(h)},this),e.forEach(function(e){t.balls.splice(e+i,1),i-=1})},t.prototype.keyUpDownHandler=function(t){var e="keydown"===t.type;this.activeKeys.set(t.keyCode,e)},t.prototype.globalKeyListener=function(t){27===t.keyCode&&!1===this.levelEnded&&this.pauseGame()},t.prototype.dispatchActions=function(){var t=this;this.activeKeys.forEach(function(e,i){if(e)switch(i){case 65:case 37:t.onKeyLeft();break;case 68:case 39:t.onKeyRight();break;case 38:case 87:t.onKeyUp();break;case 40:case 83:t.onKeyDown();break;case 32:t.onSpaceBar()}})},t.prototype.onKeyUp=function(){this.player.moveUp()},t.prototype.onKeyDown=function(){this.player.moveDown()},t.prototype.onKeyLeft=function(){this.player.moveLeft()},t.prototype.onKeyRight=function(){this.player.moveRight()},t.prototype.onSpaceBar=function(){this.player.useReward()},t.prototype.updateAI=function(){a.default.makeMove(this.ai,this.balls,this.rewards,this.size)},t.prototype.pauseGame=function(){this.isPaused?this.start():this.stop()},t}();e.default=v},function(t,e,i){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var o=i(0),s=function(t){function e(e,i){return t.call(this,e.point,e.radius,e.trajectory,"circle",i)||this}return n(e,t),e}(o.default);e.default=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t){this.x=t.x,this.y=t.y}return t.prototype.invert=function(t){this[t]=-1*this[t]},t.prototype.speed=function(t){this.x=this.x>0?this.x+t:this.x-t,this.y=this.y>0?this.y+t:this.y-t},t.prototype.getSpeed=function(t){var e=Math.hypot(this.x,this.y);return t?Math.abs(e):e},t}();e.default=n},function(t,e,i){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var o=i(0),s=function(t){function e(i,n,o){var s=this,r={fill:e.getBlockColor(i.strength),stroke:"black","stroke-width":"0.5"};return s=t.call(this,i.point,i.size,{x:0,y:0},"rect",n,r)||this,i.strength?s.strength=i.strength:s.strength=1,s.dropReward=o,s.reward=i.reward,s.index=-1,s}return n(e,t),e.prototype.setIndex=function(t){this.index=t},e.prototype.getStrength=function(){return this.strength},e.prototype.getHit=function(t){return this.strength-=t,this.updateColor(),this.strength<=0&&(this.reward>-1&&this.dropReward(this.point,this.reward),this.destroy()),this.strength},e.prototype.updateColor=function(){this.domElement.setAttribute("fill",e.getBlockColor(this.strength))},e.getBlockColor=function(t){switch(t){case 7:return"#FF0D72";case 6:return"#0DC2FF";case 5:return"#0DFF72";case 4:return"#F538FF";case 3:return"#FF8E0D";case 2:return"#FFE138";default:case 1:return"#3877FF"}},e}(o.default);e.default=s},function(t,e,i){"use strict";function n(t,e,i,n){t instanceof f.default?r(t,e,i,n):y.default}function o(t,e){var i=t.getTraj(),n=e.getTraj(),o=t.getPoint().y,s=e.getPoint().y;return i.y>0&&n.y<0?-1:n.y>0&&i.y<0?1:n.y>0&&i.y>0?o>s?-1:1:n.y<0&&i.y<0&&o>s?1:-1}function s(t,e,i){var n=e.getSize(),o=l(t,i,n.height);if(!c(o,e)&&!p(o,e))return!0;var s=h(t,i.height,n.height),r=o.x>e.point.x?e.point.x+n.width:e.point.x,a=Math.abs(r-o.x);return e.moveAmount*s>a}function r(t,e,i,n){t.useReward();var r=e.filter(function(e){return s(e,t,n)}).sort(o);a(t,r,n)}function a(t,e,i){if(0!==e.length){var n=t.getSize().height,o=1===e.length,s=l(e[0],i,n),r=o?s:l(e[1],i,n);c(s,t)||u(r,s,t)?t.moveLeft():(p(s,t)||d(r,s,t))&&t.moveRight()}}function u(t,e,i){return c(t,i)&&v.isCollision(e,{x:i.nextLeft(),y:i.point.y},i.getSize())}function d(t,e,i){return p(t,i)&&v.isCollision(e,{x:i.nextRight(),y:i.point.y},i.getSize())}function h(t,e,i){var n=t.getTraj();return((n.y>0?0:2*t.point.y)+(e-i-t.point.y))/Math.abs(n.y)}function l(t,e,i){var n=t.getTraj(),o=t.getPoint(),s=h(t,e.height,i),r=o.x+n.x*s,a=r-e.width;return a>0&&(r-=2*a),{x:Math.abs(r),y:e.height-i-.5}}function c(t,e){return t.x<=e.point.x}function p(t,e){return t.x>=e.point.x+e.getSize().width-1}Object.defineProperty(e,"__esModule",{value:!0});var f=i(5),y=i(6),v=i(7);e.default={makeMove:n}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n;!function(t){t[t.none=0]="none",t[t.rocket=1]="rocket",t[t.machine=2]="machine",t[t.wide=3]="wide"}(n||(n={})),e.default=n},function(t,e,i){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var o=i(0),s=function(t){function e(e,i,n){var o=this,s={fill:"red",stroke:"black","stroke-width":"0.5"};return o=t.call(this,e,i,{x:0,y:-9},"rect",n,s)||this,o.strength=1,o.isDestroyed=!1,o}return n(e,t),e.prototype.getNextPosition=function(){return{x:this.point.x+Math.sign(this.traj.x),y:this.point.y+Math.sign(this.traj.y)}},e.prototype.getStrength=function(){return this.strength},e.prototype.getHit=function(t){return this.strength-=t,this.strength<=0&&this.destroy(),this.strength},e.prototype.getSpeed=function(t){return this.traj.getSpeed(t)},e.prototype.update=function(){this.point=this.getNextPosition(),this.updateDOMPosition()},e.prototype.destroy=function(){this.isDestroyed=!0,this.mountNode.removeChild(this.domElement)},e}(o.default);e.default=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(2),o=function(){function t(e,i,o){n.default.css("StatusBar"),this.rewardSelect=e,this.mountNode=o,this.domElement=document.createElement("div"),this.domElement.classList.add("status-bar"),this.domElement.innerHTML=t.getInnerHTML(String(i)),this.score=this.domElement.querySelector("#"+t.ID.SCORE),this.rewards=this.domElement.querySelector("#"+t.ID.REWARDS),o.appendChild(this.domElement)}return t.prototype.updateScore=function(t){this.score.innerHTML=String(t)},t.getInnerHTML=function(e){return"\n            <h3>Level "+e+"</h3>\n            <h4>Score: <span id='"+t.ID.SCORE+"'></span></h4>\n            <div id='"+t.ID.REWARDS+"'></div>\n        "},t.prototype.removeSelection=function(){var e=this.rewards.querySelector("#"+t.ID.SELECTED);e&&(e.id="")},t.prototype.addReward=function(e){var i=this;this.removeSelection();var n=document.createElement("div");n.onclick=function(){i.rewardSelect(e),i.removeSelection(),n.id=t.ID.SELECTED},n.id=t.ID.SELECTED,n.innerHTML=String(e),this.rewards.appendChild(n)},t.ID={SCORE:"score",REWARDS:"rewards",SELECTED:"selected"},t}();e.default=o},function(t,e,i){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var o=i(0),s=function(t){function e(e,i,n){var o=t.call(this,e,{width:3,height:3},{x:0,y:1},"rect",n)||this;return o.rewardType=i,o}return n(e,t),e}(o.default);e.default=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(8),o=i(4),s=i(20),r=i(22),a=i(1),u=i(2),d=function(){function t(t){u.default.css("LevelSelector"),this.cb=t,this.modal=new n.default(!1),this.levelThumbNails=new s.default(this.modal.extensionPoint,this.levelSelect.bind(this)),this.overview=new r.default(this.modal.extensionPoint,this.startLevel.bind(this))}return t.prototype.levelSelect=function(t){var e=o.default.getScore(t,a.default.defender),i=o.default.getScore(t,a.default.capture);this.overview.update({level:String(t),defender:e,capture:i})},t.prototype.show=function(e,i){e=e?e+t.defaultMessage:t.defaultMessage,this.modal.show(e)},t.prototype.startLevel=function(t,e){var i=this;u.default.level(String(t)).then(function(n){return i.cb(n,t,e)}).catch(console.warn).then(function(){return i.modal.hide()})},t.defaultMessage="Choose a level",t}();e.default=d},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(4),o=i(21),s=i(2),r=function(){function t(t,e){s.default.css("LevelThumbNail"),this.mountNode=t,this.levelSelectCB=e;var i=document.createElement("div");i.classList.add("level-thumbnails"),this.attachLevelNodes(i),this.mountNode.appendChild(i)}return t.prototype.attachLevelNodes=function(e){var i=this,s=!0;o.default.forEach(function(o,r){var a=document.createElement("span"),u=n.default.getScore(r),d=u>=o.minScore,h="";a.classList.add("level-node"),d||s?(a.addEventListener("click",function(){var t=e.querySelector("#selected");t&&(t.id=""),a.id="selected",i.levelSelectCB(r)}),a.classList.add("allowed")):a.classList.add("locked"),h=d?"completed.png":s?o.src:"locked.png",a.innerHTML=t.levelTemplate(h,String(r)),e.appendChild(a),s=d})},t.levelTemplate=function(t,e){return"\n            <img width='48px' height='48px' src="+t+" />\n            <p>"+e+"</p>\n        "},t}();e.default=r},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=[{minScore:100,src:"thumbnail.png"},{minScore:200,src:"thumbnail.png"}];e.default=n},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(1),o=function(){function t(e,i){this.startLevel=i;var n=document.createElement("div");n.classList.add("level-overview"),n.innerHTML=t.template,this.levelNumber=n.getElementsByTagName("h3")[0],this.defenderHighScore=n.querySelector("#"+t.ID.DEFENDER+"-highscore"),this.captureHighScore=n.querySelector("#"+t.ID.CAPTURE+"-highscore"),this.defenderOption=n.getElementsByClassName(t.ID.DEFENDER+"-option")[0],this.captureOption=n.getElementsByClassName(t.ID.CAPTURE+"-option")[0],this.startButton=n.querySelector("#"+t.ID.START),this.addEventListeners(),e.appendChild(n)}return t.prototype.addEventListeners=function(){var t=this;this.defenderOption.addEventListener("click",function(){return t.setOption(n.default.defender)}),this.captureOption.addEventListener("click",function(){return t.setOption(n.default.capture)}),this.startButton.addEventListener("click",function(){return t.startLevel(t.level,t.option)})},t.prototype.setOption=function(t){t===n.default.defender?(this.defenderOption.classList.add("selected"),this.captureOption.classList.remove("selected")):t===n.default.capture&&(this.defenderOption.classList.remove("selected"),this.captureOption.classList.add("selected")),this.option=t},t.prototype.update=function(t){this.level=+t.level,this.levelNumber.innerHTML="Level: "+t.level,this.defenderHighScore.innerHTML="Highscore: "+t.defender,this.captureHighScore.innerHTML="Highscore: "+t.capture},t.ID={DEFENDER:"defender",CAPTURE:"capture",START:"start"},t.template="\n        <h3>Level</h3>\n        <div class='character-selector'>\n            <div class='option "+t.ID.DEFENDER+"-option'>\n                <h5>Defender</h5>\n                <h5 id='"+t.ID.DEFENDER+"-highscore'>Highscore:</h5>\n            </div>\n            <div class='option "+t.ID.CAPTURE+"-option'>\n                <h5>Capture the Flag</h5>\n                <h5 id='"+t.ID.CAPTURE+"-highscore'>Highscore:</h5>\n            </div>\n        </div>\n        <button id='"+t.ID.START+"'>START</button>\n    ",t}();e.default=o}],[9]);